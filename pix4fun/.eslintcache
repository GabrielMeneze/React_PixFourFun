[{"C:\\Users\\gabri\\Documents\\GitHub\\React_PixFourFun\\pix4fun\\src\\pages\\Carrinho\\index.jsx":"1"},{"size":7252,"mtime":1614037938122,"results":"2","hashOfConfig":"3"},{"filePath":"4","messages":"5","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"6"},"1clyjjo","C:\\Users\\gabri\\Documents\\GitHub\\React_PixFourFun\\pix4fun\\src\\pages\\Carrinho\\index.jsx",["7","8","9"],"import React, { useState } from 'react';\r\nimport Header from '../../components/Header'\r\nimport './index.css';\r\nimport Footer from '../../components/Footer';\r\n\r\n\r\nconst Carrinho = () => {\r\n\r\n    const [listarImgs, setListarImgs] = React.useState(localStorage.getItem(\"produtoinCart\"));\r\n    const [custoTotal, setCustoTotal] = useState(0)\r\n    const [cartNumber, setCartNumber] = React.useState(localStorage.getItem(\"cartNumber\"))\r\n    const [fretePreco, setFrete] = React.useState(localStorage.getItem(\"frete\"))\r\n\r\n    function Validar(event) {\r\n        event.preventDefault();\r\n        const formData = new FormData(event.target);\r\n        const data = Object.fromEntries(formData);\r\n\r\n        if (data.Cupom) {\r\n            if (data.Cupom === 'PIX10') {\r\n                let desconto = (custoeFrete * 0.9);\r\n                if (frete) {\r\n                    console.log('e')\r\n                    setCustoTotal(descontoEcusto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }));\r\n                } else {\r\n                    console.log('s')\r\n                    setCustoTotal(desconto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }));\r\n                }\r\n                console.log('novo valor com 10% de desconto: ', desconto)\r\n            } else {\r\n                console.log('cupom não é valido')\r\n            }\r\n        } else {\r\n            console.log('é necessario preencher o campo')\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    function calcularHandler(event) {\r\n        event.preventDefault();\r\n        const formData = new FormData(event.target);\r\n        const data = Object.fromEntries(formData);\r\n        fetch('http://localhost:3002/?calcular=' + data.calcular)\r\n            .then(response => response.json())\r\n            .then(r => {\r\n                return (\r\n                    console.log(r),\r\n                    localStorage.setItem('frete', r.result[1].Valor),\r\n                    window.location.reload()\r\n                )\r\n            })\r\n            .catch(console.error)\r\n\r\n        if (frete) {\r\n            setCustoTotal(FreteCusto.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }))\r\n        }\r\n            \r\n                  \r\n    }\r\n \r\n    \r\n    var separadores = ['\"', ':', ',', '}']\r\n    const keys = listarImgs.split(new RegExp('(' + separadores.join('|') + ')'))\r\n\r\n    let custo = parseFloat(keys[24])\r\n    let frete = parseFloat(fretePreco)\r\n    let custoeFrete = (custo + frete)\r\n    let desconto = (custo * 0.9)\r\n    let descontoEcusto = (desconto + frete)\r\n    let FreteCusto = (frete+custo)\r\n    \r\n\r\n\r\n    return (\r\n        <div className=\"mai\">\r\n            <Header />\r\n            <div className=\"produto-detalhes\">\r\n                <div className=\"con\">\r\n                    <div className=\"produto-h\">\r\n                        <h5 className=\"titulo\">produto</h5>\r\n                        <h5 className=\"preco\">preço</h5>\r\n                        <h5 className=\"quantidade\">quantidade</h5>\r\n                        <h5 className=\"total\">total</h5>\r\n                    </div>\r\n                </div>\r\n                <div className=\"con\">\r\n                    <div className=\"produto-carrinho\">\r\n                        {<p className=\"pack-nome\" >{keys[14]}</p>}\r\n                        {<p className=\"preco-b\">{keys[24]}</p>}\r\n                        {<p className=\"quantidade-b\">{cartNumber}</p>}\r\n                        {<p className=\"custo\">{keys[24]}</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <section className=\"container-resumo\">\r\n                <div className=\"resumo-pedido\">\r\n                    <div className=\"limit-div\">\r\n                        <h5>Resumo pedido</h5>\r\n                        <div className=\"resumo-detalhes\">\r\n                            {<p>{cartNumber} produto(s)</p>}\r\n                            {<p>R${keys[24]}</p>}\r\n                        </div>\r\n                        <div className=\"resumo-detalhes\">\r\n                            {<p>frete</p>}\r\n                            {<p>R${fretePreco}</p>}\r\n                        </div>\r\n                        <div className=\"resumo-inputs\">\r\n                            <form onSubmit={calcularHandler}>\r\n                                <div className=\"form-group\">\r\n                                    <input\r\n                                        placeholder=\"CEP\"\r\n                                        type=\"text\"\r\n                                        name=\"calcular\"\r\n                                        className=\"form-control\"\r\n                                    >\r\n                                    </input>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        value=\"Calcular\"\r\n                                        className=\"input-btn\"\r\n                                    >Calcular</button>\r\n                                </div>\r\n                            </form>\r\n                            <form className=\"form-cupom\" onSubmit={Validar}>\r\n                                <div className=\"form-group\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"Cupom\"\r\n                                        className=\"form-control\"\r\n                                        placeholder=\"Cupom\"\r\n                                    >\r\n                                    </input>\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        value=\"vcupom\"\r\n                                        className=\"input-btn\"\r\n                                    >OK</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n\r\n                        <hr />\r\n\r\n                        <div className=\"resumo-detalhes\">\r\n                            <strong>total</strong>\r\n                            <strong>{custoTotal}</strong>\r\n                        </div>\r\n                        <div className=\"buy-area\">\r\n                            <button className=\"buy-button\">\r\n                                COMPRAR\r\n                        </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* <form onSubmit={pagamentoHandler}>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"pago\"\r\n                            className=\"form-control\"\r\n                        >\r\n                        </input>\r\n                        <button\r\n                            type=\"submit\"\r\n                            value=\"Pago\"\r\n                        >mercado</button>\r\n                    </div>\r\n                </form> */}\r\n            <script\r\n                src=\"https://www.mercadopago.com.ar/integrations/v1/web-payment-checkout.js\"\r\n                data-preference-id='<%= global.id %>'>\r\n            </script>\r\n            <Footer />\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Carrinho;",{"ruleId":"10","severity":1,"message":"11","line":9,"column":24,"nodeType":"12","messageId":"13","endLine":9,"endColumn":37},{"ruleId":"10","severity":1,"message":"14","line":11,"column":24,"nodeType":"12","messageId":"13","endLine":11,"endColumn":37},{"ruleId":"10","severity":1,"message":"15","line":12,"column":24,"nodeType":"12","messageId":"13","endLine":12,"endColumn":32},"no-unused-vars","'setListarImgs' is assigned a value but never used.","Identifier","unusedVar","'setCartNumber' is assigned a value but never used.","'setFrete' is assigned a value but never used."]